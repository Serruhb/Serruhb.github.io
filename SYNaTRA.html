<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SYNaTRA Automation Recipes</title>
<style>
  :root {
    --bg: #f8fafc;
    --card: #ffffff;
    --text: #0f172a;
    --muted: #64748b;
    --border: #e2e8f0;
    --accent: #0ea5e9;
  }
  * { box-sizing: border-box; }
  body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background: linear-gradient(#f8fafc,#fff); color: var(--text); }
  header { position: sticky; top:0; z-index: 10; backdrop-filter: blur(6px); background: rgba(255,255,255,0.85); border-bottom: 1px solid var(--border); }
  .container { max-width: 1040px; margin: 0 auto; padding: 16px; }
  .title { display:flex; align-items:center; gap:12px; }
  .title h1 { margin:0; font-size: 20px; font-weight: 700; letter-spacing: .2px; }
  .subtitle { margin: 2px 0 0; font-size: 12px; color: var(--muted); }
  .searchwrap { position: relative; width: 100%; max-width: 520px; }
  .search { width: 100%; padding: 10px 12px 10px 36px; border-radius: 12px; border:1px solid var(--border); background:#fff; font-size:14px; }
  .searchicon { position:absolute; left:10px; top:50%; transform: translateY(-50%); color: var(--muted); font-size: 16px; }
  main { padding: 24px 0 48px; }
  .card { background: var(--card); border:1px solid var(--border); border-radius: 16px; box-shadow: 0 1px 3px rgba(15,23,42,0.06); }
  .card.pad { padding: 20px; }
  .pills { display:flex; flex-wrap: wrap; gap:8px; margin-top: 8px; }
  .pill { display:inline-flex; align-items:center; padding: 2px 8px; border-radius: 999px; border: 1px solid var(--border); background:#fff; font-size: 12px; color: #111827; }
  .grid { display: grid; gap: 12px; }
  @media(min-width: 720px){ .grid2 { grid-template-columns: repeat(2, minmax(0,1fr)); } }
  .acc { overflow: hidden; }
  .acc button { all: unset; display:flex; align-items:flex-start; justify-content: space-between; gap: 12px; width:100%; padding: 16px; cursor: pointer; }
  .acc h4 { margin:0; font-size: 16px; font-weight: 700; }
  .acc p { margin: 4px 0 0; color: var(--muted); font-size: 13px; }
  .acc .chev { transition: transform .2s ease; margin-left: 8px; }
  .acc.open .chev { transform: rotate(90deg); }
  .acc .panel { padding: 0 16px 16px; display:none; }
  .acc.open .panel { display:block; }
  .section { margin-top: 12px; }
  .section h3 { margin:0 0 6px; font-size: 14px; font-weight: 700; }
  .list { margin: 0; padding-left: 18px; line-height: 1.6; font-size: 14px; }
  .kv { display:flex; gap:6px; align-items:center; }
  .kv a { color: var(--accent); text-decoration: none; }
  .kv a:hover { text-decoration: underline; }
  .empty { text-align:center; color: var(--muted); font-size: 14px; padding: 32px; }
  footer { text-align:center; color: var(--muted); font-size: 12px; padding: 24px 0 48px; }
  .linkbtn { display:inline-block; padding:8px 10px; border:1px solid var(--border); border-radius: 10px; text-decoration:none; color:#111827; background:#fff; font-size: 13px; }
  .row { display:grid; gap: 12px; }
  @media(min-width: 860px){ .row { grid-template-columns: repeat(2, minmax(0,1fr)); } }
</style>
</head>
<body>
  <header>
    <div class="container" style="display:flex; align-items:center; justify-content: space-between; gap:12px;">
      <div class="title">
        <div style="width:24px; height:24px; border-radius:8px; background:#0ea5e9;"></div>
        <div>
          <h1>SYNaTRA Automation Recipes</h1>
          <p class="subtitle">Workato orchestration for Customer Success triage</p>
        </div>
      </div>
      <div class="searchwrap">
        <span class="searchicon">ðŸ”Ž</span>
        <input id="search" class="search" placeholder="Search recipes, connections, or notes" />
      </div>
    </div>
  </header>

  <main>
    <div class="container grid gap-16">
      <section class="card pad">
        <h2 style="margin:0 0 6px; font-size:18px; font-weight:700;">Overview</h2>
        <p style="margin: 6px 0 0; font-size:14px; color:#334155; line-height:1.7;">
          This page summarizes the SYNaTRA Workato recipes included in the portfolio repository. Each card documents purpose,
          triggers, connections, inputs and outputs, and the operational flow. Links point to the corresponding markdown
          files with deeper details, redaction notes, and example queries.
        </p>
        <div class="pills">
          <span class="pill">Salesforce</span>
          <span class="pill">Jira</span>
          <span class="pill">Snowflake</span>
          <span class="pill">SOQL</span>
          <span class="pill">JQL</span>
          <span class="pill">SQL</span>
        </div>
      </section>

      <section id="cards" class="grid gap-12"></section>

      <footer>Â© <span id="year"></span> SYNaTRA. Portfolio excerpt for demonstration; operational details redacted.</footer>
    </div>
  </main>

<script>
  const data = [
    {
      id: "search-account",
      title: "Search for Account Id with Account Name",
      link: "./recipes/SearchforAccountIdwithName.md",
      summary: "If an account name is provided, search part or all of the customer name to retrieve an Account Id. If no name is provided, this step is skipped.",
      trigger: "Invoked by parent triage flow when customer name is present.",
      inputs: [
        { name: "account_name", desc: "Full or partial customer name string" },
      ],
      connections: ["Salesforce (SOQL via connector)"],
      outputs: [
        { name: "account_id", desc: "Resolved Salesforce Account Id" },
      ],
      flow: [
        "Normalize incoming name (trim, case-fold)",
        "SOQL fuzzy search on Account.Name with LIMIT and ORDER BY relevance",
        "If multiple matches, return top candidate(s) and confidence score",
        "If no match, bubble a not found status to parent flow",
      ],
      notes: [
        "Skips entirely when no name is supplied by the parent flow.",
        "Use guarded LIKE queries and field allowlist to avoid wide scans.",
      ],
    },
    {
      id: "current-contract",
      title: "Getting Customer's Current Contract Information",
      link: "./recipes/GetttingCasesRelatedtoCustomer.md",
      summary: "Retrieves contact information and active subscriptions for the resolved Account Id.",
      trigger: "Runs after Account Id is resolved.",
      inputs: [
        { name: "account_id", desc: "Salesforce Account Id" },
      ],
      connections: ["Salesforce (SOQL via connector)", "Snowflake (SQL optional)"],
      outputs: [
        { name: "contracts", desc: "Active contract records" },
        { name: "subscriptions", desc: "Plan, term, MRR if applicable" },
      ],
      flow: [
        "Query Account, related Contracts and Subscriptions",
        "Shape a minimal profile for downstream steps",
      ],
      notes: [
        "Redact PII fields before logging or exporting.",
        "Validate effective dates and status fields.",
      ],
    },
    {
      id: "cases-related",
      title: "Getting Cases Related to Customer",
      link: "./recipes/GetttingCasesRelatedtoCustomer.md",
      summary: "Queries Salesforce for Cases linked to the Account using the provided identifier.",
      trigger: "Runs after Account Id is resolved or when account is directly provided.",
      inputs: [
        { name: "account_id", desc: "Salesforce Account Id" },
        { name: "lookback_days", desc: "Window for recent cases (default 180)" },
      ],
      connections: ["Salesforce (SOQL via connector)"],
      outputs: [
        { name: "cases", desc: "Recent or relevant cases for triage" },
      ],
      flow: [
        "Parameterized SOQL with WHERE AccountId = :account_id",
        "ORDER BY CreatedDate DESC LIMIT n",
      ],
      notes: [
        "Avoid SELECT *; project only the fields you need.",
        "Consider case sensitivity and locale in text fields.",
      ],
    },
    {
      id: "search-cases-keywords",
      title: "Search Cases for Keywords",
      link: "./recipes/SearchCasesforKeywords.md",
      summary: "Full-text style keyword search across recent Cases based on the issue description.",
      trigger: "Runs when user supplies an issue description.",
      inputs: [
        { name: "issue_text", desc: "Short free-text description" },
        { name: "account_id", desc: "Optional scoping to customer" },
      ],
      connections: ["Salesforce (SOQL; optional SOSL)"] ,
      outputs: [
        { name: "case_hits", desc: "Ranked list of matching cases" },
      ],
      flow: [
        "Tokenize and normalize issue_text",
        "Construct SOSL or SOQL match query",
        "Score and rank results and return top k",
      ],
      notes: [
        "Favor indexed fields and SOSL for broader text search.",
        "Throttle queries to respect API limits.",
      ],
    },
    {
      id: "search-tickets-keywords",
      title: "Search Tickets for Keywords",
      link: "./recipes/SearchTicketsforKeywords.md",
      summary: "Keyword search over Jira tickets to find prior engineering resolutions.",
      trigger: "Runs in parallel with case keyword search.",
      inputs: [
        { name: "issue_text", desc: "Short free-text description" },
        { name: "project_keys", desc: "Optional Jira projects to scope" },
      ],
      connections: ["Jira (JQL via connector)"],
      outputs: [
        { name: "ticket_hits", desc: "Ranked list of matching Jira issues" },
      ],
      flow: [
        "Normalize text and build JQL with contains and labels",
        "Order by updated DESC; limit to safe page size",
      ],
      notes: [
        "Redact issue keys and URLs in public screenshots.",
        "Cache results by hash(issue_text) when appropriate.",
      ],
    },
  ];

  const cards = document.getElementById('cards');
  const search = document.getElementById('search');
  const year = document.getElementById('year');
  year.textContent = String(new Date().getFullYear());

  function render(recipes){
    cards.innerHTML = '';
    if(!recipes.length){
      const div = document.createElement('div');
      div.className = 'card pad empty';
      div.textContent = 'No recipes matched your search. Try a different keyword.';
      cards.appendChild(div);
      return;
    }

    recipes.forEach(r => {
      const acc = document.createElement('div');
      acc.className = 'card acc';

      const btn = document.createElement('button');
      btn.innerHTML = `
        <div style="display:flex; gap:12px; align-items:flex-start;">
          <div style="width:18px; height:18px; border-radius:6px; background:#0ea5e9; margin-top:2px;"></div>
          <div>
            <h4>${r.title}</h4>
            <p>${r.summary}</p>
          </div>
        </div>
        <div class="chev" aria-hidden>â€º</div>
      `;
      btn.addEventListener('click', ()=> acc.classList.toggle('open'));

      const panel = document.createElement('div');
      panel.className = 'panel';
      panel.innerHTML = `
        <div class="row">
          <div class="section">
            <h3>Trigger</h3>
            <p style="font-size:14px; color:#1f2937;">${r.trigger}</p>
          </div>
          <div class="section">
            <h3>Connections</h3>
            <div class="pills">${r.connections.map(c=>`<span class='pill'>${c}</span>`).join('')}</div>
          </div>
          <div class="section">
            <h3>Inputs</h3>
            <ul class="list">${r.inputs.map(i=>`<li><strong>${i.name}</strong>: ${i.desc}</li>`).join('')}</ul>
          </div>
          <div class="section">
            <h3>Outputs</h3>
            <ul class="list">${r.outputs.map(o=>`<li><strong>${o.name}</strong>: ${o.desc}</li>`).join('')}</ul>
          </div>
          <div class="section">
            <h3>Flow</h3>
            <ol class="list">${r.flow.map(step=>`<li>${step}</li>`).join('')}</ol>
          </div>
          <div class="section">
            <h3>Notes</h3>
            <ul class="list">${r.notes.map(n=>`<li>${n}</li>`).join('')}</ul>
          </div>
        </div>
        <div style="margin-top:14px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
          <a class="linkbtn" href="${r.link}">View recipe README</a>
          <span style="font-size:12px; color:#64748b;">Redaction and PII guardrails applied</span>
        </div>
      `;

      acc.appendChild(btn);
      acc.appendChild(panel);
      cards.appendChild(acc);
    });
  }

  function filter(){
    const q = (search.value || '').trim().toLowerCase();
    if(!q){ render(data); return; }
    const filtered = data.filter(r => {
      const hay = [r.title, r.summary, r.trigger, ...r.connections].join(' ').toLowerCase();
      return hay.includes(q);
    });
    render(filtered);
  }

  search.addEventListener('input', filter);
  render(data);
</script>
</body>
</html>
